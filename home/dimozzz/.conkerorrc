require("index-webjump.js");
require("new-tabs.js");

function define_key_buffer_switch(key, buf_num) {
	define_key(content_buffer_normal_keymap, key, function (I) {
		switch_to_buffer(I.window, I.window.buffers.get_buffer(buf_num));
	});
}

for (let i = 0; i < 10; ++i)
	define_key_buffer_switch(i == 9 ? "0" : (i+1).toString(), i);

user_pref("extensions.checkCompatibility", false);



homepage = "about:blank";

require("clicks-in-new-buffer.js");
clicks_in_new_buffer_target = OPEN_NEW_BUFFER_BACKGROUND; 
clicks_in_new_buffer_button = 1; //  midclick links in new buffers with

require("minibuffer-completion.js");

// auto completion in the minibuffer
minibuffer_auto_complete_default = true;
url_completion_use_bookmarks = true;
url_completion_use_history = true;
url_completion_use_webjumps = true;


interactive("copy-url",
        "Copy the current buffer's URL to the clipboard",
        function(I) {
            var text = I.window.buffers.current.document.location.href;
            writeToClipboard(text);
            I.window.minibuffer.message("copied: " + text);
        }
);
define_key(default_global_keymap, "y", "copy-url");


define_key(content_buffer_normal_keymap, "t", "find-url-new-buffer");
define_key(content_buffer_normal_keymap, "d", "kill-current-buffer");
define_key(content_buffer_normal_keymap, "M-left", "back");
define_key(content_buffer_normal_keymap, "M-right", "forward");
define_key(content_buffer_normal_keymap, "B", "");
define_key(content_buffer_normal_keymap, "u", "");
define_key(content_buffer_normal_keymap, "f5", "reload");

can_kill_last_buffer = false;